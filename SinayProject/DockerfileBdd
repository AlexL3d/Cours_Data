# Utilisez l'image de base PostgreSQL
FROM python

# Copiez vos scripts SQL dans le conteneur
COPY init_db_script.sql /docker-entrypoint-initdb.d/
COPY other_script.sql /docker-entrypoint-initdb.d/

# Exposez le port de PostgreSQL (par défaut 5432)
EXPOSE ${PORT_POSTGRE}

# Configuration des variables d'environnement pour la base de données (modifiable selon vos besoins)
ENV POSTGRES_USER=${POSTGRES_USER}
ENV POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
ENV POSTGRES_DB=${POSTGRES_DB}

# Copie des fichiers requis dans le conteneur
# Le point sert à copier le fichier dans le dossier du WORKDIR
COPY requirements.txt .
COPY ./Application/main.py .

# Installation des dépendances
RUN pip install -r requirements.txt

# Commande pour exécuter l'application
CMD ["python", "./Application/mainBDD.py"]